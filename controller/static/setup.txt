includeLibs.tx_syntaxhighlight_controller = EXT:syntaxhighlight/controller/class.tx_syntaxhighlight_controller.php

plugin.tx_syntaxhighlight_controller = USER
plugin.tx_syntaxhighlight_controller {
	userFunc = tx_syntaxhighlight_controller->main


		// Dimensions, widths, heights, pixels

	alternateLines = {$plugin.tx_syntaxhighlight_controller.alternateLines}
	lineNumbers    = {$plugin.tx_syntaxhighlight_controller.lineNumbers}
	startLine      = {$plugin.tx_syntaxhighlight_controller.startLine}
	
	
	template (
			<div class="tx-syntaxhighlight" id="###ID###">
				<div class="title"###TITLESTYLE###>###TITLE###</div>
				<div class="text" id="text_###ID###">###TEXT###</div>
				<p> <a href="/nc/test/code-highlighter/#" onclick="tx_syntaxhighlightSelectText('###ID###'); return false;">here is the code in plain for copy&paste</a> </p>
				<div id="clippyText_###ID###" style="display: none;">
				<textarea id="clippyTextArea_###ID###" name="clippyTextArea" rows="5" cols="40"></textarea>
				</div>
			</div>
	)
	

		// keyword link settings

	link {
		enable = 1
		target = _blank
		style {
			link    = text-decoration: underline;
			hover   = text-decoration: none;
			active  = 
			visited =
		}	
	}


		// general settings

	useGeshiCSS = 1


		// language specific settings

	typoscript {

		link < plugin.tx_syntaxhighlight_controller.link

		style {
			overall = color: #222; 
			overallMerge = 1
			lineNumbers {
				normal = color: #222;
				fancy = color: #222; background: #fdfdfd;
			}
				// setup keyword styles. Either merge them or replace the styles
				// completely
			keyword {
					// Conditions: http://support.typo3.org/documentation/tsref/conditions/
				set1 {
					value = 
					merge = 1
				}
					// Functions: http://support.typo3.org/documentation/tsref/functions/
				set2 {
					value =
					merge = 1
				}
					// Toplevel objects: http://support.typo3.org/documentation/tsref/tlo-objects/
				set3 {
					value =
					merge = 1
				}
					// Content Objects (cObject) : http://support.typo3.org/documentation/tsref/cobjects/
				set4 {
					value =
					merge = 1
				}
					// GIFBUILDER toplevel link: http://support.typo3.org/documentation/tsref/gifbuilder/
				set5 {
					value =
					merge = 1
				}
					// GIFBUILDER: http://support.typo3.org/documentation/tsref/gifbuilder/
				set6 {
					value =
					merge = 1
				}
					// MENU Objects: http://support.typo3.org/documentation/tsref/menu/
				set7 {
					value =
					merge = 1
				}
					// MENU common properties: http://support.typo3.org/documentation/tsref/menu/common-properties/
				set8 {
					value =
					merge = 1
				}
					// MENU item states: http://support.typo3.org/documentation/tsref/menu/item-states/
				set9 {
					value =
					merge = 1
				}
			}
				// comment styles
			comment {
				set1 {
					value = 
					merge = 1
				}
				set2 {
					value =
					merge = 1
				}
				set3 {
					value =
					merge = 1
				}
				multiline {
					value = 
					merge = 1
				}
			}
				// symbol style
			symbol {
				set0 {
					value = 
					merge = 1
				}
					// bracket style
				set1 {
					value = 
					merge = 1
				}
			}
				// string style
			string {
				value = 
				merge = 1
			}
				// number style
			number {
				value = 
				merge = 1
			}
				// method style
			method {
				set1 {
					value =
					merge = 1
				}
				set2 {
					value =
					merge = 1
				}
			}
				// regexp style
			regexp {
					// Constant
				set0 {
					value =
					merge = 1
				}
					// Constant dollar sign
				set1 {
					value =
					merge = 1
				}
					// xhtml tag
				set2 {
					value =
					merge = 1
				}
					// extension keys / tables: (static|user|ttx|tx|tt|fe)_something[_something]
				set3 {
					value =
					merge = 1
				}
					// conditions and controls
				set4 {
					value =
					merge = 1
				}
					// lowlevel setup and constant objects
				set5 {
					value =
					merge = 1
				}
			}
		}
	}
}

tt_content.list.20.syntaxhighlight_controller =< plugin.tx_syntaxhighlight_controller

#page.headerData.9876 = TEXT
#page.headerData.9876.value = <link rel="stylesheet" type="text/css" href="typo3conf/ext/syntaxhighlight/res/highlight.css" />

lib.parseFunc.allowTags     := addToList(code)
lib.parseFunc.denyTags      := removeFromList(code)
lib.parseFunc_RTE.allowTags := addToList(code)	
lib.parseFunc_RTE.denyTags  := removeFromList(code)
lib.parseFunc_RTE.tags.code = TEXT
lib.parseFunc_RTE.tags.code.current = 1

lib.parseFunc_RTE.tags.code.postUserFunc {
	codeStyle =
	enableClasses = 1
	headerType = div
	lineStyle1 = background: #eeeeee;
	lineStyle2 = background: #fffff;
	lineStyleDefaults =
	linesExtraStyle = background: #ffcccc;
	overallClass =
	overallId =
	overallStyle = 
	overallStyleDefaults = 
	tabWidth = 2
}

	// avoid remapping div tag
lib.parseFunc_RTE.nonTypoTagStdWrap.encapsLines.remapTag.DIV >

	// set the user function 
lib.parseFunc_RTE.tags.code.postUserFunc = user_highlightRTE->highlightRTE
