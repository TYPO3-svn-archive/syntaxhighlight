includeLibs.tx_syntaxhighlight_controller = EXT:syntaxhighlight/controller/class.tx_syntaxhighlight_controller.php

plugin.tx_syntaxhighlight_controller = USER
plugin.tx_syntaxhighlight_controller {
	userFunc = tx_syntaxhighlight_controller->main

		// Dimensions, widths, heights, pixels

	alternateLines = {$plugin.tx_syntaxhighlight_controller.alternateLines}
	lineNumbers    = {$plugin.tx_syntaxhighlight_controller.lineNumbers}
	startLine      = {$plugin.tx_syntaxhighlight_controller.startLine}
	
	
	template (
			<div class="CodeBox" id="###ID###">
				<div class="CodeBoxTitel"> 
				###LANGUAGE###
				<div class="CodeBoxCode">###CODE###</div>
			</div>
	)
	
		// Settings

	useGeshiCSS = 1

	style {
		overall = color: #333;
		overallMerge = 1
		lineNumbers {
			normal = color: #000; background: #fcfcfc;
			fancy = color: #333; background: #fdfdfd;
		}
			// setup keyword styles. Either merge them or replace the styles
			// completely
		keyword {
				// set 1 contains keywords like if, while, do, for, switch etc.
			set1 {
				value = 
				merge = 1
			}
				// set 2 contains null, false, 1 etc. 
			set2 {
				value =
				merge = 1
			}
				// set 3 contains function inbuilt into the language (echo,
				// htmlspecialchars etc. in PHP)
			set3 {
				value =
				merge = 1
			}
				// set 4 contains data types and similar variable modifiers: int,
				// double, real, static etc.
			set4 {
				value =
				merge = 1
			}
		}
			// comment styles
		comment {
			set1 {
				value = 
				merge = 1
			}
			set2 {
				value =
				merge = 1
			}
			set3 {
				value =
				merge = 1
			}
			multiline {
				value = color: blue;
				merge = 1
			}
		}
			// escape character style
		escape {
			value = 
			merge = 1
		}
			// symbol style
		symbol {
			value = 
			merge = 1
		}
			// string style
		string {
			value = 
			merge = 1
		}
			// number style
		number {
			value = 
			merge = 1
		}
			// method style
		method {
			set1 {
				value =
				merge = 1
			}
			set2 {
				value =
				merge = 1
			}
		}
			// regexp style
		regexp {
			set1 {
				value =
				merge = 1
			}
			set2 {
				value =
				merge = 1
			}
		}
	}
}

tt_content.list.20.syntaxhighlight_controller =< plugin.tx_syntaxhighlight_controller

#page.headerData.9876 = TEXT
#page.headerData.9876.value = <link rel="stylesheet" type="text/css" href="typo3conf/ext/syntaxhighlight/res/highlight.css" />

lib.parseFunc.allowTags     := addToList(code)
lib.parseFunc.denyTags      := removeFromList(code)
lib.parseFunc_RTE.allowTags := addToList(code)	
lib.parseFunc_RTE.denyTags  := removeFromList(code)
lib.parseFunc_RTE.tags.code = TEXT
lib.parseFunc_RTE.tags.code.current = 1

lib.parseFunc_RTE.tags.code.postUserFunc {
	codeStyle =
	enableClasses = 1
	headerType = div
	lineStyle1 = background: #eeeeee;
	lineStyle2 = background: #fffff;
	lineStyleDefaults =
	linesExtraStyle = background: #ffcccc;
	overallClass =
	overallId =
	overallStyle = 
	overallStyleDefaults = 
	tabWidth = 2
}

	// avoid remapping div tag
lib.parseFunc_RTE.nonTypoTagStdWrap.encapsLines.remapTag.DIV >

	// set the user function 
lib.parseFunc_RTE.tags.code.postUserFunc = user_highlightRTE->highlightRTE
